<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Odoo Open Treasures (Записи о 12.0)</title><link>http://blog.odooist.com/</link><description></description><atom:link href="http://blog.odooist.com/ru/categories/120.xml" rel="self" type="application/rss+xml"></atom:link><language>ru</language><copyright>Contents © 2019 &lt;a href="mailto:odooist@gmail.com"&gt;Odooist&lt;/a&gt; </copyright><lastBuildDate>Fri, 15 Nov 2019 13:31:42 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Hiding entire tree column with column_invisible</title><link>http://blog.odooist.com/ru/posts/hiding-entire-tree-column-with-column_invisible/</link><dc:creator>Odooist</dc:creator><description>&lt;div&gt;&lt;p&gt;We all know a way to hide a field in tree &amp;amp; form views using &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;attrs={'invisible':&lt;/span&gt; &lt;span class="pre"&gt;[(...)]}&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We also know that we can hide &lt;strong&gt;entire column&lt;/strong&gt; using &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;invisible="1"&lt;/span&gt;&lt;/code&gt; attribute like this:&lt;/p&gt;
&lt;pre class="code xml"&gt;&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-1"&gt;&lt;/a&gt;&lt;span class="nt"&gt;&amp;lt;tree&lt;/span&gt; &lt;span class="na"&gt;decoration-warning=&lt;/span&gt;&lt;span class="s"&gt;"event_input_mode == True"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-2"&gt;&lt;/a&gt;    &lt;span class="nt"&gt;&amp;lt;field&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"event_input_mode"&lt;/span&gt; &lt;span class="na"&gt;invisible=&lt;/span&gt;&lt;span class="s"&gt;"1"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-3"&gt;&lt;/a&gt;    &lt;span class="nt"&gt;&amp;lt;field&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"description"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-4"&gt;&lt;/a&gt;    &lt;span class="nt"&gt;&amp;lt;field&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"facility"&lt;/span&gt; &lt;span class="na"&gt;invisible=&lt;/span&gt;&lt;span class="s"&gt;"context.get('hide_facility')"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-5"&gt;&lt;/a&gt;    &lt;span class="nt"&gt;&amp;lt;field&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"uid"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_8e3f728dbf244417aa39d14e81f303d3-6"&gt;&lt;/a&gt;&lt;span class="nt"&gt;&amp;lt;/tree&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;In the above example we need &lt;code class="docutils literal"&gt;event_input_mode&lt;/code&gt; column just to highlight a row if
it have &lt;code class="docutils literal"&gt;event_input_mode&lt;/code&gt; set so we hide it with &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;invisible="1"&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We can also notice that we can use &lt;code class="docutils literal"&gt;context&lt;/code&gt; values in condition expression.
In the above example if &lt;code class="docutils literal"&gt;context&lt;/code&gt; has &lt;code class="docutils literal"&gt;hide_facility&lt;/code&gt; key then entire column is hidden.&lt;/p&gt;
&lt;div class="section" id="the-treasure"&gt;
&lt;h2&gt;The treasure&lt;/h2&gt;
&lt;p&gt;But what if you need to hide entire column by a condition coming from complex business
logic implemented in Python?&lt;/p&gt;
&lt;p&gt;Here &lt;strong&gt;column_invisible&lt;/strong&gt; attribute comes!&lt;/p&gt;
&lt;p&gt;See this examples:&lt;/p&gt;
&lt;pre class="code xml"&gt;&lt;a name="rest_code_b80b711171834a389070d5f0a55dfeee-1"&gt;&lt;/a&gt;&lt;span class="nt"&gt;&amp;lt;tree&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b80b711171834a389070d5f0a55dfeee-2"&gt;&lt;/a&gt;    ...
&lt;a name="rest_code_b80b711171834a389070d5f0a55dfeee-3"&gt;&lt;/a&gt;    &lt;span class="nt"&gt;&amp;lt;field&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"foo"&lt;/span&gt; &lt;span class="na"&gt;attrs=&lt;/span&gt;&lt;span class="s"&gt;"{'column_invisible': [('parent.product_id', '!=', False)]}"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;a name="rest_code_b80b711171834a389070d5f0a55dfeee-4"&gt;&lt;/a&gt;    ...
&lt;a name="rest_code_b80b711171834a389070d5f0a55dfeee-5"&gt;&lt;/a&gt;&lt;span class="nt"&gt;&amp;lt;/tree&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;By digging the source code I can see &lt;code class="docutils literal"&gt;column_invisible&lt;/code&gt; was introduced in Odoo 11.0.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><guid>http://blog.odooist.com/ru/posts/hiding-entire-tree-column-with-column_invisible/</guid><pubDate>Fri, 15 Nov 2019 11:15:55 GMT</pubDate></item></channel></rss>